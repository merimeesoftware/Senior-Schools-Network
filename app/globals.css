@tailwind base;
@tailwind components;
@tailwind utilities;

/* Vertical pan animation for hero images - reveals full image over time */
@keyframes vertical-pan {
  0% {
    transform: translateY(-15%);
  }
  100% {
    transform: translateY(10%);
  }
}

/* Slide-up animation for stage content panel */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stage-content-enter {
  animation: slideInUp 0.3s ease-out;
}

/* Fade-in animation for collapsible evidence quotes */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .animate-fadeIn {
    animation: none;
    opacity: 1;
    transform: none;
  }
}

@layer base {
  :root {
    --color-primary: #4A7A4A;
    --color-gold: #CDAF6F;
    --color-parchment: #F5F1E9;
    --gradient-hero: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.55));
  }

  /* Liturgical Season Theming - Tridentine 1962 Rubrics */
  [data-season="requiem"] {
    --color-primary: #4A4A4A;
    --color-gold: #B89A5A;
    --color-parchment: #E8DCC8;
    --gradient-hero: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.7));
  }

  [data-season="advent"] {
    --color-primary: #7B2D8E;
    --color-gold: #B8860B;
    --color-parchment: #D8C8B8;
    --gradient-hero: linear-gradient(to bottom, rgba(40,20,50,0.45), rgba(30,20,40,0.6));
  }

  [data-season="christmas"] {
    --color-primary: #FFFFFF;
    --color-gold: #D4AF37;
    --color-parchment: #FFF8E7;
    --gradient-hero: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.5));
  }

  [data-season="epiphany"] {
    --color-primary: #4A7A4A;
    --color-gold: #B8860B;
    --color-parchment: #E8E0D0;
    --gradient-hero: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.55));
  }

  [data-season="septuagesima"] {
    --color-primary: #6A4A7A;
    --color-gold: #9A7A5A;
    --color-parchment: #D8C8D0;
    --gradient-hero: linear-gradient(to bottom, rgba(40,30,50,0.45), rgba(30,25,40,0.6));
  }

  [data-season="lent"] {
    --color-primary: #5A3A6A;
    --color-gold: #8A6A5A;
    --color-parchment: #D0C8C0;
    --gradient-hero: linear-gradient(to bottom, rgba(30,20,40,0.5), rgba(20,20,30,0.65));
  }

  [data-season="easter"] {
    --color-primary: #FFFFFF;
    --color-gold: #FFD700;
    --color-parchment: #FFFAEB;
    --gradient-hero: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.5));
  }

  [data-season="pentecost"] {
    --color-primary: #4A7A4A;
    --color-gold: #B8860B;
    --color-parchment: #E8E0D0;
    --gradient-hero: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.55));
  }

  body {
    @apply bg-parchment text-charcoal font-body;
    font-size: 16px;
    line-height: 1.7;
    letter-spacing: 0.02em;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-heading;
    letter-spacing: 0.01em;
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    .animate-bounce {
      animation: none;
    }
  }
}

@layer components {
  /* Subtle parchment texture for organic feel */
  .parchment-texture {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4'%3E%3Cpath d='M0 0h1v1H0zm2 2h1v1H2z' fill='%23000' opacity='0.08'/%3E%3C/svg%3E");
  }

  @media (max-width: 768px) {
    .parchment-texture {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4'%3E%3Cpath d='M0 0h1v1H0zm2 2h1v1H2z' fill='%23000' opacity='0.06'/%3E%3C/svg%3E");
    }
  }

  /* Vertical pan animation for hero images - animates transform to reveal full image */
  .hero-image-pan {
    animation: vertical-pan 30s ease-in-out infinite alternate;
    will-change: transform;
  }

  /* Ensure images inside maintain proper aspect ratio */
  .hero-image-pan img {
    object-fit: cover !important;
  }

  /* Pause animation on reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .hero-image-pan {
      animation: none;
      transform: none;
    }
  }

  /* Disable animation on mobile for performance */
  @media (max-width: 768px) {
    .hero-image-pan {
      animation: none;
      transform: none;
    }
  }

  /* Hero seasonal gradient overlay */
  .hero-gradient {
    background: var(--gradient-hero);
  }

  /* Strong text shadow for text over images */
  .hero-text-shadow {
    text-shadow: 
      0 0 20px rgba(0,0,0,0.9),
      0 0 40px rgba(0,0,0,0.7),
      0 2px 4px rgba(0,0,0,0.9);
  }

  /* Ink depth shadow for parchment aesthetic */
  .ink-depth {
    text-shadow: 0 1px 1px rgba(0,0,0,0.1);
  }

  /* Accessible screen-reader-only helper (reveal on focus handled inline) */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .btn-primary {
    @apply bg-forest text-gold px-6 py-3 rounded-organic font-lato font-semibold transition-all duration-200 hover:bg-forest-dark hover:shadow-organic-md focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 focus:ring-offset-parchment;
  }

  .btn-secondary {
    @apply bg-gold text-charcoal px-6 py-3 rounded-organic font-lato font-semibold transition-all duration-200 hover:bg-gold-light hover:shadow-organic-md focus:outline-none focus:ring-2 focus:ring-forest focus:ring-offset-2 focus:ring-offset-parchment;
  }

  .btn-outline {
    @apply border-2 border-forest text-forest bg-transparent px-6 py-3 rounded-organic font-lato font-semibold transition-all duration-200 hover:bg-forest hover:text-gold focus:outline-none focus:ring-2 focus:ring-forest focus:ring-offset-2 focus:ring-offset-parchment;
  }

  /* Hero-specific buttons with backdrop for universal readability */
  .btn-hero-primary {
    @apply bg-forest/90 backdrop-blur-sm text-gold px-6 py-3 rounded-organic font-lato font-semibold transition-all duration-200 hover:bg-forest hover:shadow-organic-lg focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 focus:ring-offset-transparent;
  }

  .btn-hero-outline {
    @apply border-2 border-parchment/90 text-parchment bg-charcoal/40 backdrop-blur-sm px-6 py-3 rounded-organic font-lato font-semibold transition-all duration-200 hover:bg-parchment hover:text-forest hover:border-parchment focus:outline-none focus:ring-2 focus:ring-gold focus:ring-offset-2 focus:ring-offset-transparent;
  }

  .card {
    @apply bg-parchment-light rounded-organic-lg shadow-organic p-6 transition-all duration-200 hover:shadow-organic-md hover:-translate-y-1;
  }

  .card-elevated {
    @apply bg-parchment-light rounded-organic-lg shadow-organic-md p-8 transition-all duration-200 hover:shadow-organic-lg hover:-translate-y-1;
  }

  .quote-block {
    @apply border-l-4 border-gold pl-6 py-4 my-6 italic font-body text-lg text-charcoal;
  }

  .section-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .content-container {
    @apply max-w-prose mx-auto;
  }

  .focus-visible-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gold focus-visible:ring-offset-2 focus-visible:ring-offset-parchment;
  }

  .link-hover {
    @apply text-forest-dark underline decoration-gold decoration-2 underline-offset-2 transition-colors duration-200 hover:text-forest hover:decoration-gold-dark focus-visible-ring;
  }

  /* Optional overlay utility for text-over-image contrast if needed */
  .image-overlay-gradient {
    @apply absolute inset-0 bg-gradient-to-b from-black/30 via-black/20 to-black/40 pointer-events-none;
  }

  /* Syllogism Section Decorations */
  .syllogism-number {
    @apply absolute -left-16 top-0 text-6xl font-heading text-forest/20;
  }

  .major-premise-border {
    @apply border-l-8 border-poetic/30;
  }

  .minor-premise-border {
    @apply border-l-8 border-forest/30;
  }

  .conclusion-border {
    @apply border-l-8 border-gold/60;
  }

  /* Responsive numeral sizing */
  @media (min-width: 1280px) {
    .syllogism-number {
      @apply text-8xl -left-20;
    }
  }

  /* Problem vs Solution Panel Styling */
  .problem-panel {
    @apply bg-charcoal/5;
    filter: grayscale(30%) brightness(0.95);
  }

  .solution-panel {
    @apply bg-spiritual/5;
  }

  /* Ensure images respect filters */
  .problem-panel img {
    filter: grayscale(70%) brightness(0.9);
  }

  .solution-panel img {
    filter: none;
  }

  /* Counterargument Accordion Styling */
  .counterargument-item {
    @apply bg-spiritual/5;
  }

  .counterargument-item[data-state="open"] {
    @apply border-spiritual bg-spiritual/10;
  }

  .counterargument-item[data-state="open"]::before {
    content: "âœ“";
    @apply absolute -left-10 top-4 text-2xl text-spiritual;
  }

  /* Argument Accordion Variant */
  .argument-accordion-item {
    @apply relative;
  }

  .argument-accordion-item[data-state="open"] {
    @apply border-green-700/40 shadow-lg shadow-green-700/10;
  }

  .argument-accordion-item[data-state="open"]::before {
    content: "";
    @apply absolute -left-1 top-0 bottom-0 w-1 bg-green-700 rounded-l-lg;
  }

  /* Enhanced animation for argument variant */
  .argument-accordion-item .accordion-content {
    @apply transition-all duration-300;
  }

  /* Tooltip fade-in animation for RotatingQuotes */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }
}
